
---
title: "Bellabeat Case Study"
output:
  html_document:
    df_print: paged
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Ask

## Introdcution

### Summary

Bellabeat is a small company focused on creating health-related smart devices for women. Since being founded in 2013, Bellabeat has been empowering women with knowledge of their own health and habits as they have expanded to become a global company.   

This report will focus on making marketing recommendations for Spring, Bellabeat’s water bottle device. This water bottle tracks daily water intake using smart technology, and connects this information back to the Bellabeat app. This allows users to track hydration levels and ensure that they are appropriately hydrated throughout the day. 

### Business Task

Identify trends in consumer smart device use, and use the conclusions to give marketing recommendations for a Bellabeat product to the company. 

### Stakeholders

Urška Sršen: The cofounder and Chief Creative Officer of Bellabeat 
Sando Mur: Cofounder and executive team member of Bellabeat
Bellabeat marketing analytics team: This Bellabeat team of data analysts collect, analyze, and report data for the purposes of guiding Bellabeat's marketing strategy

### Questions that will be answered

What are some trends in smart device usage?
How could these trends apply to Bellabeat customers?
How could these trends help influence Bellabeat marketing strategy?

# Prepare

## Data Used

### Dataset

The dataset Fitbit Fitness Tracker Data available on Kaggle was used in this analysis. The data set contains personal tracker data from about 30 Fitbit users who consented to the submission of their data. This data will act as a representation of smart device usage. 

### Licensing, Privacy, Security, and Accessibility

The dataset is in the public domain under creative commons which effectively frees users from any copyright restrictions. The data was made avaiblable by Kaggle user Mobius. 

### Data Generation

The dataset was generated by respondants to a distributed survey via Amazon Mechanical Turk between March 12th 2016 and May 12th 2016. Data included in the dataset personal tracker data giving information on variables such as heart rate, intensity, sleep, and more. 

### Data Download and Organization

Datasets were downloaded from Kaggle and imported to R. For the purposes of this report, only utilized files are shown below. 

```{r}
install.packages("tidyverse", repos = "http://cran.us.r-project.org")
library(tidyverse)
daily_intensities <- read_csv("/Users/isabelmcilhenny/Desktop/google cert/bellabeat.case.study/docs/Fitabase Data 4.12.16-5.12.16/dailyIntensities_merged.csv")
hourly_intensities <- read_csv("/Users/isabelmcilhenny/Desktop/google cert/bellabeat.case.study/docs/Fitabase Data 4.12.16-5.12.16/hourlyIntensities_merged.csv")
daily_activity <- read_csv("/Users/isabelmcilhenny/Desktop/google cert/bellabeat.case.study/docs/Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv")
```

After looking through the data contained in each file via the head function, it was determined that daily intensity data and hourly intensity data would be most valuable in gaining insights for the marketing of Spring.

This data was decided on to try and determine when individuals are being the most active, and when users were actually wearing their device. When it comes to hydration, one's activity intensity and duration are going to be what predicts the need for water. The trends of what days and times seem to be popular for activity could be used to determine when it is most important to encourage the use of Spring. 


# Process

### Gathering Information

First, the data was checked to see how many unique participant ID values were included in each dataset to ensure that data from all praticipants were included. Each file had 33 unique IDs. 

```{r}
unique(daily_intensities$Id)
unique(hourly_intensities$Id)
```

The data was then examined for duplicate values. None were found. 
```{r}
sum(duplicated(daily_intensities))
sum(duplicated(hourly_intensities))
```

To see the period of time that data was collected from, the number of unique date values was examined. It was found that data was collected from April 12th 2016 to May 12th 2016. 
```{r}
unique(daily_activity$ActivityDate)
```

After viewing the hourly intensities data, it was noticed that there were no units associated with intensity. Therefore, to guage the meaning of a value, the minimum and maximum values were found. The intensity values ranged from 0 to 180. 
```{r}
max(hourly_intensities$TotalIntensity)
min(hourly_intensities$TotalIntensity)
```

### Cleaning

After installing the Janitor package, functions were run to remove empty values and to check again if any duplicates were found. 
```{r}
install.packages("janitor", repos = "http://cran.us.r-project.org")
library(janitor)
remove_empty(hourly_intensities)
remove_empty(daily_intensities)
get_dupes(hourly_intensities)
get_dupes(daily_intensities)
```

Next, dates that were included as strings of characters were converted to date values. Note that in the future, the hourly intensities would be converted to a 24 hour date time value. This converted it to a 12 hour system which then had to be fixed down the line. 
```{r}
daily_intensities$date <- lubridate::parse_date_time(daily_intensities$ActivityDay,"mdy")
hourly_intensities$datetime <- lubridate::parse_date_time(hourly_intensities$ActivityHour,"mdy HMS")
```

# Analyze

### Data Analysis

The data analysis was focused on finding patterns in activity over different days of the week and determining smart device usage patterns of individuals. 


Days of the week were found from the date values so that activity patterns could be observed across different days. 
```{r}
daily_intensities$day_of_week <- weekdays(daily_intensities$date)
hourly_intensities$day_of_week <- weekdays(hourly_intensities$datetime)
```

The mean of sedentary minutes over each weekday was taken to guage activity on different days of the week. 
```{r}
mean(daily_intensities$SedentaryMinutes[daily_intensities$day_of_week == 'Monday'])
mean(daily_intensities$SedentaryMinutes[daily_intensities$day_of_week == 'Tuesday'])
mean(daily_intensities$SedentaryMinutes[daily_intensities$day_of_week == 'Wednesday'])
mean(daily_intensities$SedentaryMinutes[daily_intensities$day_of_week == 'Thursday'])
mean(daily_intensities$SedentaryMinutes[daily_intensities$day_of_week == 'Friday'])
mean(daily_intensities$SedentaryMinutes[daily_intensities$day_of_week == 'Saturday'])
mean(daily_intensities$SedentaryMinutes[daily_intensities$day_of_week == 'Sunday'])
```

Next, data frames representing each day of the week were created. 
```{r}
Monday_intensities_trial <-data.frame(total_intensity = hourly_intensities$TotalIntensity[hourly_intensities$day_of_week == 'Monday'], activity_hour = hourly_intensities$ActivityHour[hourly_intensities$day_of_week == 'Monday'])
Tuesday_intensities <-data.frame(total_intensity = hourly_intensities$TotalIntensity[hourly_intensities$day_of_week == 'Tuesday'], activity_hour = hourly_intensities$ActivityHour[hourly_intensities$day_of_week == 'Tuesday'])
Wednesday_intensities <-data.frame(total_intensity = hourly_intensities$TotalIntensity[hourly_intensities$day_of_week == 'Wednesday'], activity_hour = hourly_intensities$ActivityHour[hourly_intensities$day_of_week == 'Wednesday'])
Thursday_intensities <-data.frame(total_intensity = hourly_intensities$TotalIntensity[hourly_intensities$day_of_week == 'Thursday'], activity_hour = hourly_intensities$ActivityHour[hourly_intensities$day_of_week == 'Thursday'])
Friday_intensities <-data.frame(total_intensity = hourly_intensities$TotalIntensity[hourly_intensities$day_of_week == 'Friday'], activity_hour = hourly_intensities$ActivityHour[hourly_intensities$day_of_week == 'Friday'])
Saturday_intensities <-data.frame(total_intensity = hourly_intensities$TotalIntensity[hourly_intensities$day_of_week == 'Saturday'], activity_hour = hourly_intensities$ActivityHour[hourly_intensities$day_of_week == 'Saturday'])
Sunday_intensities <-data.frame(total_intensity = hourly_intensities$TotalIntensity[hourly_intensities$day_of_week == 'Sunday'], activity_hour = hourly_intensities$ActivityHour[hourly_intensities$day_of_week == 'Sunday'])
```

Then, dates of each data frame were converted to a 24 hour time system to account for an earlier mistake. 
```{r}
Monday_intensities_trial$datetime_military <- lubridate::parse_date_time(Monday_intensities_trial$activity_hour,"mdy %I:%M:%S %p")
Tuesday_intensities$datetime_military <- lubridate::parse_date_time(Tuesday_intensities$activity_hour,"mdy %I:%M:%S %p")
Wednesday_intensities$datetime_military <- lubridate::parse_date_time(Wednesday_intensities$activity_hour,"mdy %I:%M:%S %p")
Thursday_intensities$datetime_military <- lubridate::parse_date_time(Thursday_intensities$activity_hour,"mdy %I:%M:%S %p")
Friday_intensities$datetime_military <- lubridate::parse_date_time(Friday_intensities$activity_hour,"mdy %I:%M:%S %p")
Saturday_intensities$datetime_military <- lubridate::parse_date_time(Saturday_intensities$activity_hour,"mdy %I:%M:%S %p")
Sunday_intensities$datetime_military <- lubridate::parse_date_time(Sunday_intensities$activity_hour,"mdy %I:%M:%S %p")
```

Then, to better observe how activity changes across the day, the hour assigned to each data point was extracted from the date time values. 
```{r}
install.packages("lubridate", repos = "http://cran.us.r-project.org")
library(lubridate)
Monday_intensities_trial$military_hour <- hour(Monday_intensities_trial$datetime_military)
Tuesday_intensities$military_hour <- hour(Tuesday_intensities$datetime_military)
Wednesday_intensities$military_hour <- hour(Wednesday_intensities$datetime_military)
Thursday_intensities$military_hour <- hour(Thursday_intensities$datetime_military)
Friday_intensities$military_hour <- hour(Friday_intensities$datetime_military)
Saturday_intensities$military_hour <- hour(Saturday_intensities$datetime_military)
Sunday_intensities$military_hour <- hour(Sunday_intensities$datetime_military)
```

Then, the mean of total intensity of specific hours of each day were found. (ex. The average total intensity of the 1pm hour across all days)
```{r}
aggregate(Monday_intensities_trial$total_intensity, list(Monday_intensities_trial$military_hour), FUN=mean)
aggregate(Tuesday_intensities$total_intensity, list(Tuesday_intensities$military_hour), FUN=mean)
aggregate(Wednesday_intensities$total_intensity, list(Wednesday_intensities$military_hour), FUN=mean)
aggregate(Thursday_intensities$total_intensity, list(Thursday_intensities$military_hour), FUN=mean)
aggregate(Friday_intensities$total_intensity, list(Friday_intensities$military_hour), FUN=mean)
aggregate(Saturday_intensities$total_intensity, list(Saturday_intensities$military_hour), FUN=mean)
aggregate(Sunday_intensities$total_intensity, list(Sunday_intensities$military_hour), FUN=mean)
```

The above values were then made into seperate data frames so that they could later be vizualized. 
```{r}
Monday_times <- data.frame(aggregate(Monday_intensities_trial$total_intensity, list(Monday_intensities_trial$military_hour), FUN=mean))
hour <- Monday_times$Group.1
Monday_times$military_hour <- Monday_times$Group.1 +1
Tuesday_times <- data.frame(aggregate(Tuesday_intensities$total_intensity, list(Tuesday_intensities$military_hour), FUN=mean))
Tuesday_times$military_hour <-  Tuesday_times$Group.1 +1
Wednesday_times <- data.frame(aggregate(Wednesday_intensities$total_intensity, list(Wednesday_intensities$military_hour), FUN=mean))
Wednesday_times$military_hour <-  Wednesday_times$Group.1 +1
Thursday_times <- data.frame(aggregate(Thursday_intensities$total_intensity, list(Thursday_intensities$military_hour), FUN=mean))
Thursday_times$military_hour <-  Thursday_times$Group.1 +1
Friday_times <- data.frame(aggregate(Friday_intensities$total_intensity, list(Friday_intensities$military_hour), FUN=mean))
Friday_times$military_hour <-  Friday_times$Group.1 +1
Saturday_times <- data.frame(aggregate(Saturday_intensities$total_intensity, list(Saturday_intensities$military_hour), FUN=mean))
Saturday_times$military_hour <-  Saturday_times$Group.1 +1
Sunday_times <- data.frame(aggregate(Sunday_intensities$total_intensity, list(Sunday_intensities$military_hour), FUN=mean))
Sunday_times$military_hour <-  Sunday_times$Group.1 +1
```

### Additional Data Frames

A data frame was made to track device usage across the month in which data was collected. 
```{r}
table(daily_intensities['date'])
usage <- data.frame(table(daily_intensities['date']))
```

Additionally, a data frame was created to show sedentary minutes across days of the week. 
```{r}
weekday <- c('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday')
average_sedentary_minutes <- c(1027.942, 1007.362, 989.48, 961.9932, 1000.31, 964.2823, 990.2562)
Sedentary_by_day <- data.frame(weekday, average_sedentary_minutes)
Sedentary_by_day$average_sedentary_minutes_num <- as.numeric(Sedentary_by_day$average_sedentary_minutes)
```

### Summary
Average values representing activity and/or intensity levels were found across different days of the week and at different times during these days. Usage data was also extrapolated from existing data. The next section will include data vizualizations that represent the findings of this analysis. 

# Share

## Data Vizualizations and Corresponding Analysis 

### Device Usage

Throughout the month of data collection, the number of data points for each date decreased, indicating that the devices were used less later in the month.
```{r}
install.packages("ggplot2", repos = "http://cran.us.r-project.org")
library(ggplot2)
ggplot(data = usage) +
  geom_point(mapping = aes(x = date, y = Freq)) +
  theme(axis.text.x = element_text(angle=90, hjust=1)) + ylab("frequency")
```

### Sedentary Minutes by Day of Week 

Mean sedentary minutes differed slightly by day of the week, with Monday having the most average sedentary minutes at 1027, and Thursday having the least at 961. 
```{r}
ggplot(data = Sedentary_by_day) +
  geom_col(mapping = aes(x = factor(weekday, levels = c('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday')), y = average_sedentary_minutes_num)) + 
  theme(axis.text.x = element_text(angle=90, hjust=1)) +
  xlab("Weekday") +
  ylab("Average Sedentary Minutes")
```

### Intensities Across Different Days of the Week

Among the population from which data was collected, the times of days at which individuals are more actice on average differ slightly depending on the day of the week. For instance, peak average intensity is higher earlier in the day (around 2pm) on Saturdays than it is on Wednesdays when the peak is at about 5pm. 

```{r}
ggplot(data = Monday_times) +
  geom_col(mapping = aes(x = military_hour, y = x)) +
  ylab("Average Intensity") +
  xlab("Hour of Day") +
  ggtitle("Monday")
ggplot(data = Tuesday_times) +
  geom_col(mapping = aes(x = military_hour, y = x)) +
  ylab("Average Intensity") +
  xlab("Hour of Day") +
  ggtitle("Tuesday")
ggplot(data = Wednesday_times) +
  geom_col(mapping = aes(x = military_hour, y = x)) +
  ylab("Average Intensity") +
  xlab("Hour of Day") +
  ggtitle("Wednesday")
ggplot(data = Thursday_times) +
  geom_col(mapping = aes(x = military_hour, y = x)) +
  ylab("Average Intensity") +
  xlab("Hour of Day") +
  ggtitle ("Thursday")
ggplot(data = Friday_times) +
  geom_col(mapping = aes(x = military_hour, y = x)) +
  ylab("Average Intensity") +
  xlab("Hour of Day") +
  ggtitle("Friday")
ggplot(data = Saturday_times) +
  geom_col(mapping = aes(x = military_hour, y = x)) +
  ylab("Average Intensity") +
  xlab("Hour of Day") +
  ggtitle("Saturday")
ggplot(data = Sunday_times) +
  geom_col(mapping = aes(x = military_hour, y = x)) +
  ylab("Average Intensity") +
  xlab("Hour of Day") +
  ggtitle("Sunday")
```

# Act

## Key Findings
The analysis found that among the Fitbit users from whom data was collected from, average sedentary minutes (a stand in for overall activity) differed slightly depending on the day of the week, and the time at which individuals were active also differed. Additionally, it was found that device usage declined over time. 

### Application of Findings
Although it cannot be said for certain that the patterns of these Fitbit users would mirror those of Bellabeat customers, for the purposes of this case study they will be assumed to be representative. Note that in future analysis, data from current Bellabeat users may be more beneficial to gaining insights. 

#### Usage
As device usage tends to decline over time, consider marketing Spring as a part of the user's lifestyle. For instance, consider a marketing campaign where the Spring bottle is shown with an individual at all times, even when not being actively used. Social Media or YouTube creators could be utilized to do so, especially those who create "day in the life" content. The goal of this would be to encourage users to keep their bottle constantly around so that they are reminded to continue using the device. 

#### Activity Level Variation
In order to encourage users to stay hydrated at times when they are more likely to be physically active, and thus require more fluid intake, consider creating notifications for the app that corresponds to the water bottle that go off in accordance with the above day of the week activity patterns. This way, Spring could be further marketed as a device that aligns with one's lifestyle. 

To encourage the purchase of Spring from existing customers of Bellabeat as well as the general population, a feature could be added that sends notifications to the user based on data from Bellabeat Leaf or Time devices (that track activity), encouraging them to hydrate based on their level of activity. It could be emphasized that just having the Spring or a single Bellabeat device overall does not give as accurate a picture of one's health and therefore users should buy additional products to give an accurate description of one's health and habits to get more accurate suggestions from Bellabeat. 

## Takeaway
The Spring could be marketed as a part of an overall healthy lifestyle, that can give users appropriate hydration suggestions to help them become a healthier person. 